imports:
- path: clusters.jinja

resources:
- name: standard-cluster-1
  type: clusters.jinja
  properties:
    name: standard-cluster-1
    location: us-central1-a
    network: local-vpc
    subnetwork: primary-local
    logging: true

- name: moose
  type: clusters.jinja
  properties:
    name: moose
    location: us-central1-c
    network: local-vpc
    subnetwork: primary-local
    initialNodeCount: 2
    logging: true
    vpc-native: true
    private-cluster: true
    allowed-host: bastion
    host-ip: 104.155.135.174/32
    master-cidr: 172.16.64.32/28

- name: hippo
  type: clusters.jinja
  properties:
    name: hippo
    location: us-central1
    network: local-vpc
    subnetwork: primary-local
    initialNodeCount: 1
    logging: true
    vpc-native: true
    pod-cidr: pods
    service-cidr: services1
    private-cluster: true
    allowed-host: bastion
    host-ip: 104.155.135.174/32
    master-cidr: 172.16.64.0/28

- name: lion
  type: clusters.jinja
  properties:
    name: lion
    location: us-central1
    network: local-vpc
    subnetwork: primary-local
    initialNodeCount: 1
    logging: true
    vpc-native: true
    pod-cidr: pods
    service-cidr: services2
    autoscale: true
    minNodeCount: 1
    maxNodeCount: 3

- name: narwhal
  type: clusters.jinja
  properties:
    name: narwhal
    location: us-central1-a
    network: another-vpc
    subnetwork: not-as-local
    initialNodeCount: 2
    logging: true
    networkPolicy: true

- name: zebra
  type: clusters.jinja
  properties:
    name: zebra
    location: us-central1-a
    network: another-vpc
    subnetwork: not-as-local
    initialNodeCount: 3
    logging: true
    vpc-native: true
    pod-cidr: pods
    service-cidr: services

- name: mongoose
  type: gcp-types/container-v1beta1:projects.locations.clusters
  properties: 
    parent: projects/{{ env["project"] }}/locations/us-central1-a
    cluster:
      name: mongoose
      network: projects/[shared-vpc-project-id]/global/networks/shared-vpc
      subnetwork: projects/[shared-vpc-project-id]/regions/us-central1/subnetworks/clusters
      ipAllocationPolicy:
        useIpAliases: true
        createSubnetworks: false
        clusterSecondaryRangeName: pods
        servicesSecondaryRangeName: service1
      masterAuthorizedNetworksConfig:
        enabled: true
      privateClusterConfig:
        enablePrivateNodes: true
        masterIpv4CidrBlock: 172.16.63.0/28
        enablePrivateEndpoint: true
      nodePools:
      - name: weird-mammal
        initialNodeCount: 2
        autoscaling:
          enabled: true
          minNodeCount: 1
          maxNodeCount: 4
        management:
          autoUpgrade: true
          autoRepair: true
      loggingService: logging.googleapis.com/kubernetes
      monitoringService: monitoring.googleapis.com/kubernetes
      addonsConfig:
        kubernetesDashboard:
          disabled: false
